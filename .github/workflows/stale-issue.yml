name: üßπ Nettoyage (Issues & PR P√©rim√©es)

on:
  schedule:
    # S'ex√©cute tous les jours √† 5h du matin
    - cron: '0 5 * * *'
  workflow_dispatch: # Permet un lancement manuel

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    name: üßπ Marquage des Issues/PR p√©rim√©es

    steps:
      - name: Ex√©cuter l'action "Stale"
        uses: actions/stale@v9
        with:
          # Token requis pour modifier les issues/PRs
          repo-token: ${{ secrets.GH_TOKEN }}

          # --- Configuration g√©n√©rale ---

          # Nombre de jours d'inactivit√© avant de marquer comme "p√©rim√©"
          days-before-stale: 90 # 3 mois d'inactivit√©

          # Nombre de jours avant de fermer (apr√®s le marquage)
          days-before-close: 14 # 2 semaines de gr√¢ce

          # Labels √† ajouter
          stale-issue-label: "p√©rim√©"
          stale-pr-label: "p√©rim√©"

          # --- Configuration des Issues ---
          stale-issue-message: |
            Bonjour,
            Cette issue est inactive depuis plus de 90 jours.
            Elle va √™tre ferm√©e automatiquement dans 14 jours si aucune activit√© n'est d√©tect√©e.

            Si vous pensez que cette issue est toujours pertinente, veuillez laisser un commentaire. Merci.

          # --- Configuration des Pull Requests ---
          stale-pr-message: |
            Bonjour,
            Cette Pull Request est inactive depuis plus de 90 jours.
            Elle va √™tre ferm√©e automatiquement dans 14 jours si aucune activit√© n'est d√©tect√©e.

            Si cette PR est toujours en cours de d√©veloppement, veuillez laisser un commentaire ou la marquer comme "Draft".

          # --- Exceptions (tr√®s important) ---

          # Ne jamais marquer les issues/PR avec ces labels
          # Ne pas marquer les PR en "Draft"
          exempt-draft-pr: true
